{"version":3,"sources":["pages/StaticDemo/vfx-codes lazy //.js$","pages/FirebaseDemo/vfx-codes lazy //.js$","../../src/runtime/ENUtils.js","../../src/runtime/ENMini.js","../../src/runtime/ENRuntime.js","ui/CodeButton.js","ui/BackButton.js","pages/StaticDemo/StaticDemo.js","pages/StaticDemo/getRawFirebaseData.js","pages/FirebaseDemo/FirebaseDemo.js","pages/Landing/Landing.js","App.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","constructor","this","addEventListener","listeners","set","label","removeEventListener","get","index","isFunction","listener","i","trigger","parent","k","ttt","setInterval","clearInterval","NS","Math","window","detail","v","h","fnc","isAborted","num","func","intv","clearTimeout","setTimeout","isPaused","console","name","duration","start","t","lt","dt","Proxy","json","codes","codeIDKey","codeLoaderKey","on","ev","emit","data","conn","node","title","subAPIs","inputs","outputs","answer","api","stream","onReceive","input","tt","pulse","output","ioAPIs","key","isNaN","features","a","mini","err","xhr","XDomainRequest","getJSON","url","JSON","reject","removeTrailingSlashes","graphID","firebaseConfig","processRawData","response","ans","connections","_fid","nodes","CodeButton","href","target","rel","style","position","bottom","right","padding","appearance","backgroundColor","border","borderRadius","color","cursor","BackButton","to","top","left","StaticDemo","width","height","EffectNodeInFiber","mounter","useRef","graph","useState","myInst","setCompos","useEffect","current","ENRuntime","NGpUixuU0NOkOlmLsLuepkaZxxt1","_id","nodeID","type","getCodes","clean","useFrame","three","kn","work","ref","path","require","r","arr","forEach","filename","basename","push","loader","importAll","FirebaseDemo","getEffectNodeData","databaseURL","Landing","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.21ec6912.chunk.js","sourcesContent":["var map = {\n\t\"./lok.myFristNode.js\": [\n\t\t63,\n\t\t5\n\t],\n\t\"./lok.mySecondNode.js\": [\n\t\t64,\n\t\t6\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 60;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./lok.myFristNode.js\": [\n\t\t65,\n\t\t3\n\t],\n\t\"./lok.mySecondNode.js\": [\n\t\t66,\n\t\t4\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 61;\nmodule.exports = webpackAsyncContext;","export const getID = function () {\n  return (\n    '_' +\n    Math.random().toString(36).substr(2, 9) +\n    Math.random().toString(36).substr(2, 9)\n  )\n}\n\nlet isFunction = function (obj) {\n  return typeof obj === 'function' || false\n}\n\nexport class EventEmitter {\n  constructor() {\n    this.listeners = new Map()\n  }\n\n  addEventListener(label, callback) {\n    this.listeners.has(label) || this.listeners.set(label, [])\n    this.listeners.get(label).push(callback)\n  }\n\n  removeEventListener(label, callback) {\n    let listeners = this.listeners.get(label)\n    let index = 0\n\n    if (listeners && listeners.length) {\n      index = listeners.reduce((i, listener, index) => {\n        let a = () => {\n          i = index\n          return i\n        }\n        return isFunction(listener) && listener === callback ? a() : i\n      }, -1)\n\n      if (index > -1) {\n        listeners.splice(index, 1)\n        this.listeners.set(label, listeners)\n        return true\n      }\n    }\n    return false\n  }\n\n  trigger(label, ...args) {\n    let listeners = this.listeners.get(label)\n\n    if (listeners && listeners.length) {\n      listeners.forEach((listener) => {\n        listener(...args)\n      })\n      return true\n    }\n    return false\n  }\n}\n\nexport const sleep = (t) => {\n  return new Promise((resolve) => {\n    setTimeout(resolve, t)\n  })\n}\n","import { getID } from './ENUtils'\n\nexport class ENMini {\n  constructor({ parent = false }) {\n    this.name = 'ENMini'\n\n    this.parent = parent\n\n    this.resource = new Map()\n\n    this.get = (k) => {\n      return new Promise((resolve) => {\n        let ttt = 0\n        ttt = setInterval(() => {\n          if (this.parent) {\n            if (this.resource.has(k) || this.parent.resource.has(k)) {\n              clearInterval(ttt)\n              resolve(this.resource.get(k) || this.parent.resource.get(k))\n            }\n          } else {\n            if (this.resource.has(k)) {\n              clearInterval(ttt)\n              resolve(this.resource.get(k))\n            }\n          }\n        })\n      })\n    }\n\n    let NS = getID()\n    this.set = (key, v) => {\n      this.resource.set(key, v)\n      window.dispatchEvent(new window.CustomEvent(`${NS}${key}`, { detail: v }))\n    }\n\n    this.onChange = (key, fnc) => {\n      let h = ({ detail: v }) => {\n        fnc(v)\n      }\n      this.get(key).then(fnc)\n      window.addEventListener(`${NS}${key}`, h)\n      this.onClean(() => {\n        window.removeEventListener(`${NS}${key}`, h)\n      })\n    }\n\n    let isAborted = false\n    this.tasks = []\n    this.resizeTasks = []\n    this.cleanTasks = []\n    this.onLoop = (fnc, num = 0) => {\n      if (num >= 0) {\n        this.tasks.push(fnc)\n      } else {\n        this.tasks.unshift(fnc)\n      }\n    }\n\n    this.onResize = (fnc) => {\n      fnc()\n      this.resizeTasks.push(fnc)\n    }\n\n    this.onClean = (func) => {\n      this.cleanTasks.push(func)\n    }\n\n    let intv = 0\n    let internalResize = () => {\n      clearTimeout(intv)\n      intv = setTimeout(() => {\n        this.resizeTasks.forEach((e) => e())\n      }, 16.8888)\n    }\n\n    window.addEventListener('resize', () => {\n      internalResize()\n    })\n\n    let isPaused = false\n    this.toggle = () => {\n      isPaused = !isPaused\n    }\n    this.pause = () => {\n      isPaused = true\n    }\n    this.play = () => {\n      isPaused = false\n    }\n\n    this.clean = () => {\n      isAborted = true\n      try {\n        this.cleanTasks.forEach((e) => e())\n      } catch (e) {\n        console.error(e)\n      }\n    }\n\n    this.lastTime = window.performance.now()\n    this.work = () => {\n      this.timeNow = window.performance.now()\n      if (isAborted) {\n        return {\n          name: this.name,\n          duration: 0\n        }\n      }\n      if (isPaused) {\n        return {\n          name: this.name,\n          duration: 0\n        }\n      }\n      let start = window.performance.now()\n      try {\n        let t = this.timeNow\n        let lt = this.lastTime\n        let dt = t - lt\n        this.lastTime = t\n        dt = dt / 1000\n        t = t / 1000\n        if (dt >= 100) {\n          dt = 100\n        }\n\n        this.tasks.forEach((e) => e(t, dt))\n      } catch (e) {\n        console.error(e)\n      }\n      let end = window.performance.now()\n      let duration = end - start\n\n      return {\n        name: this.name,\n        duration\n      }\n    }\n\n    this.ready = new Proxy(\n      {},\n      {\n        get: (obj, key) => {\n          return this.get(key)\n        }\n      }\n    )\n\n    this.now = new Proxy(\n      {},\n      {\n        get: (obj, key) => {\n          if (this.parent) {\n            return this.resource.get(key) || this.parent.resource.get(key)\n          } else {\n            return this.resource.get(key)\n          }\n        }\n      }\n    )\n  }\n}\n\n// let mini = new Mini({ name: \"base\", domElement: ref.current, window });\n//\n\n//\n//\n//\n","import { ENMini } from './ENMini'\nimport { EventEmitter } from './ENUtils.js'\n\nexport class ENRuntime {\n  constructor({\n    json = false,\n    codes = [],\n    codeIDKey = 'title',\n    codeLoaderKey = 'loader'\n  }) {\n    this.events = new EventEmitter()\n\n    if (!codes) {\n      throw new Error('needs code batteries')\n    }\n    if (!json) {\n      throw new Error('needs code batteries')\n    }\n\n    this.json = json\n    this.codes = codes\n\n    this.mini = new ENMini({})\n\n    this.clean = () => {\n      this.mini.clean()\n    }\n\n    const on = (ev, h) => {\n      this.events.addEventListener(ev, h)\n      this.mini.onClean(() => {\n        this.events.removeEventListener(ev, h)\n      })\n    }\n    const emit = (ev, data) => {\n      this.events.trigger(ev, data)\n    }\n\n    this.json.connections.forEach((conn) => {\n      on(conn.data.output._id, (data) => {\n        emit(conn.data.input._id, data)\n      })\n    })\n\n    this.json.nodes.forEach((node) => {\n      const title = node.data.title\n\n      const subAPIs = new Map()\n\n      const inputs = node.data.inputs\n      const outputs = node.data.outputs\n\n      inputs.forEach((input, idx) => {\n        let answer = false\n\n        let api = {\n          stream: (onReceive) => {\n            on(input._id, onReceive)\n          },\n          get ready() {\n            return new Promise((resolve) => {\n              let tt = setInterval(() => {\n                if (answer) {\n                  clearInterval(tt)\n                  resolve(answer)\n                }\n              }, 0)\n            })\n          }\n        }\n\n        on(input._id, (v) => {\n          answer = v\n        })\n\n        subAPIs.set(`in${idx}`, api)\n      })\n\n      outputs.forEach((output, idx) => {\n        subAPIs.set(`out${idx}`, {\n          pulse: (data) => {\n            emit(output._id, data)\n          }\n        })\n      })\n\n      let ioAPIs = new Proxy(\n        {},\n        {\n          get: (obj, key) => {\n            //\n            if (key.indexOf('in') === 0 && !isNaN(key[2])) {\n              return subAPIs.get(key)\n            }\n\n            if (key.indexOf('out') === 0 && !isNaN(key[3])) {\n              return subAPIs.get(key)\n            }\n            //\n          }\n        }\n      )\n\n      const features = codes.find((e) => e[codeIDKey] === title)\n\n      if (features) {\n        features[codeLoaderKey]()\n          .then(async (code) => {\n            return await code.effect({ mini: this.mini, node: ioAPIs })\n          })\n          .catch((err) => {\n            console.log(err)\n          })\n      }\n    })\n\n    this.mini.set('all-ready', true)\n  }\n}\n\nclass NewCorsXHR {\n  constructor(type, url) {\n    var xhr = false\n    try {\n      xhr = new window.XMLHttpRequest()\n    } catch (e) {}\n    if (xhr && 'withCredentials' in xhr) {\n      xhr.open(type, url, true) // Standard Cors request\n    } else if (typeof XDomainRequest !== 'undefined') {\n      xhr = new window.XDomainRequest() // IE Cors request\n      xhr.open(type, url)\n      xhr.onload = function () {\n        xhr.readyState = 4\n        if (xhr.onreadystatechange instanceof Function) {\n          xhr.onreadystatechange()\n        }\n      }\n    } else if (xhr) {\n      xhr.open(type, url, true)\n    }\n    return xhr\n  }\n}\n\nexport function getJSON({ url }) {\n  return new Promise((resolve, reject) => {\n    var xhr = new NewCorsXHR('GET', url)\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        try {\n          let json = JSON.parse(xhr.responseText)\n          resolve(json)\n        } catch (e) {\n          reject(e)\n        }\n      }\n    }\n    xhr.send()\n  })\n}\n/**\n * @param {string} url\n */\nfunction removeTrailingSlashes(url) {\n  return url.replace(/\\/+$/, '') // Removes one or more trailing slashes from URL\n}\n\nexport async function getEffectNodeData({ firebaseConfig, graphID }) {\n  let url = `${removeTrailingSlashes(\n    firebaseConfig.databaseURL\n  )}/canvas/${graphID}.json`\n\n  //\n  return getJSON({ url }).then(processRawData, () => {\n    return false\n  })\n}\n\nexport const processRawData = (response) => {\n  let ans = false\n  for (let kn in response) {\n    if (!ans) {\n      ans = response[kn]\n    }\n  }\n\n  //\n  if (ans) {\n    let connections = []\n\n    for (let kn in ans.connections) {\n      connections.push({\n        _fid: kn,\n        data: ans.connections[kn]\n      })\n    }\n\n    let nodes = []\n    for (let kn in ans.nodes) {\n      nodes.push({\n        _fid: kn,\n        data: ans.nodes[kn]\n      })\n    }\n\n    return {\n      connections,\n      nodes\n    }\n  } else {\n    return false\n  }\n}\n","import React from 'react'\n\nexport function CodeButton({ url }) {\n  return (\n    <a href={url} target='_blank' rel='noreferrer noopener'>\n      <button\n        style={{\n          position: 'absolute',\n          bottom: '50px',\n          right: '50px',\n          padding: '10px 20px',\n          appearance: 'none',\n          backgroundColor: 'greenyellow',\n          border: 'none',\n          borderRadius: `15px`,\n          color: 'darkgreen',\n          cursor: 'pointer'\n        }}\n      >\n        View Code\n      </button>\n    </a>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nexport function BackButton({ url }) {\n  return (\n    <Link to={'/'}>\n      <button\n        style={{\n          position: 'absolute',\n          top: '50px',\n          left: '50px',\n          padding: '10px 20px',\n          appearance: 'none',\n          backgroundColor: 'cyan',\n          border: 'none',\n          borderRadius: `15px`,\n          color: 'darkblue',\n          cursor: 'pointer'\n        }}\n      >\n        Home\n      </button>\n    </Link>\n  )\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport { ENRuntime, processRawData } from 'effectnode'\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { getRawFirebaseData } from './getRawFirebaseData'\nimport { CodeButton } from '../../ui/CodeButton'\nimport { BackButton } from '../../ui/BackButton'\n\nexport function StaticDemo() {\n  return (\n    <div style={{ width: '100%', height: '100%' }}>\n      <Canvas style={{ width: '100%', height: '100%' }}>\n        <EffectNodeInFiber></EffectNodeInFiber>\n      </Canvas>\n      <CodeButton url='https://github.com/wonglok/effectnode/blob/master/example/src/pages/StaticDemo/StaticDemo.js'></CodeButton>\n      <BackButton></BackButton>\n    </div>\n  )\n}\n\nexport function EffectNodeInFiber() {\n  let mounter = useRef()\n  let graph = useRef()\n  let [myInst, setCompos] = useState(() => {\n    return <group></group>\n  })\n\n  useEffect(() => {\n    graph.current = new ENRuntime({\n      json: processRawData(getRawFirebaseData()),\n      codes: getCodes()\n    })\n\n    graph.current.mini.get('DefaultComponent').then((v) => {\n      setCompos(v)\n    })\n\n    return () => {\n      if (graph.current) {\n        graph.current.mini.clean()\n        graph.current.clean()\n      }\n    }\n  }, [])\n\n  useFrame(({ get }) => {\n    let three = get()\n    if (graph.current) {\n      for (let kn in three) {\n        graph.current.mini.set(kn, three[kn])\n      }\n      if (mounter.current) {\n        graph.current.mini.set('mounter', mounter.current)\n      }\n      graph.current.mini.work()\n    }\n  })\n\n  return (\n    <>\n      <group ref={mounter}>{myInst}</group>\n    </>\n  )\n}\n\nexport const getCodes = () => {\n  let path = require('path')\n  let r = require.context('./vfx-codes', true, /\\.js$/, 'lazy')\n\n  function importAll(r) {\n    let arr = []\n    r.keys().forEach((key) => {\n      let filename = path.basename(key)\n\n      arr.push({\n        title: filename,\n        loader: () => r(key)\n      })\n    })\n\n    return arr\n  }\n  let codes = importAll(r)\n\n  return codes\n}\n\nif (module.hot) {\n  module.hot.dispose(() => {\n    window.location.reload()\n  })\n}\n","export const getRawFirebaseData = () => {\n  return {\n    NGpUixuU0NOkOlmLsLuepkaZxxt1: {\n      connections: {\n        '-MdPINDxi9T3AotCKSfB': {\n          _id: '_via641l4y3wgloaeb7',\n          input: {\n            _id: '_od5ohzl5avwo3ltnf8',\n            nodeID: '_lka05oa2emaxqkxd7w',\n            type: 'input'\n          },\n          output: {\n            _id: '_iys0bi1wbszoajdrbq',\n            nodeID: '_sbhxwatnnvkk95yslm',\n            type: 'output'\n          }\n        }\n      },\n      nodes: {\n        '-MdFPnHiFrg5AXKZPPLV': {\n          _id: '_lka05oa2emaxqkxd7w',\n          inputs: [\n            {\n              _id: '_od5ohzl5avwo3ltnf8',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'input'\n            },\n            {\n              _id: '_fbb9aoyc66f0f057p4',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'input'\n            },\n            {\n              _id: '_kbb8xyxn4zegnkmww4',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'input'\n            },\n            {\n              _id: '_j27f14qjt3crj7jrkm',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'input'\n            },\n            {\n              _id: '_5awgse7wgryzl4unfr',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'input'\n            }\n          ],\n          outputs: [\n            {\n              _id: '_wcz630splzoznvol9b',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'output'\n            },\n            {\n              _id: '_yn1yu9pye1gep7hui2',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'output'\n            },\n            {\n              _id: '_aydf7dn80m375qhcus',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'output'\n            },\n            {\n              _id: '_p9k078jvmtv2muzw8t',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'output'\n            },\n            {\n              _id: '_g4d8r8w1y5ybgdutey',\n              nodeID: '_lka05oa2emaxqkxd7w',\n              type: 'output'\n            }\n          ],\n          position: [\n            13.81351241290946, -6.268112984381583e-15, 28.229071300777065\n          ],\n          title: 'lok.mySecondNode.js'\n        },\n        '-MdMk9rFgJSESwDybIfB': {\n          _id: '_sbhxwatnnvkk95yslm',\n          inputs: [\n            {\n              _id: '_dzsph16c3ubtltaukb',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'input'\n            },\n            {\n              _id: '_8oxaioc4n4xche1mmi',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'input'\n            },\n            {\n              _id: '_h67wqxjauc8uit6qzf',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'input'\n            },\n            {\n              _id: '_txfnifvgobsqp7wkno',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'input'\n            },\n            {\n              _id: '_hh7yqw6u0kaa2f4vsr',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'input'\n            }\n          ],\n          outputs: [\n            {\n              _id: '_iys0bi1wbszoajdrbq',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'output'\n            },\n            {\n              _id: '_s06csj99keboy364wd',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'output'\n            },\n            {\n              _id: '_r94f0g30633kompktd',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'output'\n            },\n            {\n              _id: '_lm15qdzn3k08zt783f',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'output'\n            },\n            {\n              _id: '_izp3hqkt018y23lwk0',\n              nodeID: '_sbhxwatnnvkk95yslm',\n              type: 'output'\n            }\n          ],\n          position: [\n            23.8559458588784, 1.363425432176458e-15, -6.1403222682973535\n          ],\n          title: 'lok.myFristNode.js'\n        }\n      }\n    }\n  }\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport { ENRuntime, getEffectNodeData } from 'effectnode'\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { CodeButton } from '../../ui/CodeButton'\nimport { BackButton } from '../../ui/BackButton'\nexport function FirebaseDemo() {\n  return (\n    <div style={{ width: '100%', height: '100%' }}>\n      <Canvas style={{ width: '100%', height: '100%' }}>\n        <EffectNodeInFiber></EffectNodeInFiber>\n      </Canvas>\n      <CodeButton\n        url={`https://github.com/wonglok/effectnode/blob/master/example/src/pages/FirebaseDemo/FirebaseDemo.js`}\n      ></CodeButton>\n      <BackButton></BackButton>\n    </div>\n  )\n}\n\nexport function EffectNodeInFiber() {\n  let mounter = useRef()\n  let graph = useRef()\n  let [myInst, setCompos] = useState(() => {\n    return <group></group>\n  })\n\n  useEffect(() => {\n    getEffectNodeData({ firebaseConfig, graphID: `-MdBQtfGPXXPkl-NuEoW` }).then(\n      (json) => {\n        graph.current = new ENRuntime({\n          json: json,\n          codes: getCodes()\n        })\n\n        graph.current.mini.get('DefaultComponent').then((v) => {\n          setCompos(v)\n        })\n      }\n    )\n\n    return () => {\n      if (graph.current) {\n        graph.current.mini.clean()\n        graph.current.clean()\n      }\n    }\n  }, [])\n\n  useFrame(({ get }) => {\n    let three = get()\n    if (graph.current) {\n      for (let kn in three) {\n        graph.current.mini.set(kn, three[kn])\n      }\n      if (mounter.current) {\n        graph.current.mini.set('mounter', mounter.current)\n      }\n      graph.current.mini.work()\n    }\n  })\n\n  return (\n    <>\n      <group ref={mounter}>{myInst}</group>\n    </>\n  )\n}\n\nexport const getCodes = () => {\n  let path = require('path')\n  let r = require.context('./vfx-codes', true, /\\.js$/, 'lazy')\n\n  function importAll(r) {\n    let arr = []\n    r.keys().forEach((key) => {\n      let filename = path.basename(key)\n\n      arr.push({\n        title: filename,\n        loader: () => r(key)\n      })\n    })\n\n    return arr\n  }\n  let codes = importAll(r)\n\n  return codes\n}\n\nexport const firebaseConfig = {\n  databaseURL: 'https://en-you.firebaseio.com/'\n}\n\nif (module.hot) {\n  module.hot.dispose(() => {\n    window.location.reload()\n  })\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nexport function Landing() {\n  return (\n    <div>\n      Demos of EffectNode Runtime:\n      <ul>\n        <li>\n          <Link to='/effectnode/StaticDemo'>StaticDemo</Link>\n        </li>\n        <li>\n          <Link to='/effectnode/FirebaseDemo'>FirebaseDemo</Link>\n        </li>\n      </ul>\n    </div>\n  )\n}\n","import React from 'react'\nimport { HashRouter, Switch, Route } from 'react-router-dom'\nimport { StaticDemo } from './pages/StaticDemo/StaticDemo'\nimport { FirebaseDemo } from './pages/FirebaseDemo/FirebaseDemo'\nimport { Landing } from './pages/Landing/Landing'\n\n// import 'effectnode/dist/index.css'\n\nconst App = () => {\n  return (\n    <HashRouter>\n      <Switch>\n        <Route path='/effectnode/StaticDemo'>\n          <StaticDemo />\n        </Route>\n\n        <Route path='/effectnode/FirebaseDemo'>\n          <FirebaseDemo />\n        </Route>\n\n        <Route path='/'>\n          <Landing />\n        </Route>\n      </Switch>\n    </HashRouter>\n  )\n}\n\nexport default App\n\n/*\n\n\n    <div style={{ whiteSpace: 'pre-wrap' }}>\n      <div>Keys list</div>\n      <div>{Object.keys(EN).join('\\n')}</div>\n    </div>\n*/\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}