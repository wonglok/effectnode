(this["webpackJsonpeffectnode-example"]=this["webpackJsonpeffectnode-example"]||[]).push([[0],{43:function(e,n,t){e.exports=t(62)},44:function(e,n,t){},55:function(e,n,t){var r={"./lok.myFristNode.js":[63,5],"./lok.mySecondNode.js":[64,6]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=55,e.exports=o},56:function(e,n,t){var r={"./lok.myFristNode.js":[65,3],"./lok.mySecondNode.js":[66,4]};function o(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],o=n[0];return t.e(n[1]).then((function(){return t(o)}))}o.keys=function(){return Object.keys(r)},o.id=56,e.exports=o},62:function(e,n,t){"use strict";t.r(n);t(44);var r=t(4),o=t.n(r),i=t(39),a=t.n(i),u=t(26),s=t(10),c=t(8),d=function(){function e(){this.listeners=new Map}var n=e.prototype;return n.addEventListener=function(e,n){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(n)},n.removeEventListener=function(e,n){var t=this.listeners.get(e),r=0;return!!(t&&t.length&&(r=t.reduce((function(e,t,r){return"function"===typeof t&&t===n?e=r:e}),-1))>-1)&&(t.splice(r,1),this.listeners.set(e,t),!0)},n.trigger=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var o=this.listeners.get(e);return!(!o||!o.length)&&(o.forEach((function(e){e.apply(void 0,t)})),!0)},e}(),l=function(e){var n=this,t=e.parent,r=void 0!==t&&t;this.name="ENMini",this.parent=r,this.resource=new Map,this.get=function(e){return new Promise((function(t){var r=0;r=setInterval((function(){n.parent?(n.resource.has(e)||n.parent.resource.has(e))&&(clearInterval(r),t(n.resource.get(e)||n.parent.resource.get(e))):n.resource.has(e)&&(clearInterval(r),t(n.resource.get(e)))}))}))};var o="_"+Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9);this.set=function(e,t){n.resource.set(e,t),window.dispatchEvent(new window.CustomEvent(""+o+e,{detail:t}))},this.onChange=function(e,t){var r=function(e){var n=e.detail;t(n)};n.get(e).then(t),window.addEventListener(""+o+e,r),n.onClean((function(){window.removeEventListener(""+o+e,r)}))};var i=!1;this.tasks=[],this.resizeTasks=[],this.cleanTasks=[],this.onLoop=function(e,t){void 0===t&&(t=0),t>=0?n.tasks.push(e):n.tasks.unshift(e)},this.onResize=function(e){e(),n.resizeTasks.push(e)},this.onClean=function(e){n.cleanTasks.push(e)};var a=0;window.addEventListener("resize",(function(){clearTimeout(a),a=setTimeout((function(){n.resizeTasks.forEach((function(e){return e()}))}),16.8888)}));var u=!1;this.toggle=function(){u=!u},this.pause=function(){u=!0},this.play=function(){u=!1},this.clean=function(){i=!0;try{n.cleanTasks.forEach((function(e){return e()}))}catch(e){console.error(e)}},this.lastTime=window.performance.now(),this.work=function(){if(n.timeNow=window.performance.now(),i)return{name:n.name,duration:0};if(u)return{name:n.name,duration:0};var e=window.performance.now();try{var t=n.timeNow,r=n.lastTime,o=t-r;n.lastTime=t,t/=1e3,(o/=1e3)>=100&&(o=100),n.tasks.forEach((function(e){return e(t,o)}))}catch(s){console.error(s)}var a=window.performance.now()-e;return{name:n.name,duration:a}},this.ready=new Proxy({},{get:function(e,t){return n.get(t)}}),this.now=new Proxy({},{get:function(e,t){return n.parent?n.resource.get(t)||n.parent.resource.get(t):n.resource.get(t)}})},f=function(e){var n=e.firebaseConfig,t=e.graphID;try{var r=function(e){return e.replace(/\/+$/,"")}(n.databaseURL)+"/canvas/"+t+".json";return Promise.resolve(function(e){var n=e.url;return new Promise((function(e,t){var r=new h("GET",n);r.onreadystatechange=function(){if(4===r.readyState)try{var n=JSON.parse(r.responseText);e(n)}catch(o){t(o)}},r.send()}))}({url:r}).then(p,(function(){return!1})))}catch(o){return Promise.reject(o)}},m=function(e){var n=this,t=e.json,r=void 0!==t&&t,o=e.codes,i=void 0===o?[]:o,a=e.codeIDKey,u=void 0===a?"title":a,s=e.codeLoaderKey,c=void 0===s?"loader":s;if(this.events=new d,!i)throw new Error("needs code batteries");if(!r)throw new Error("needs code batteries");this.json=r,this.codes=i,this.mini=new l({}),this.clean=function(){n.mini.clean()};var f=function(e,t){n.events.addEventListener(e,t),n.mini.onClean((function(){n.events.removeEventListener(e,t)}))},m=function(e,t){n.events.trigger(e,t)};this.json.connections.forEach((function(e){f(e.data.output._id,(function(n){m(e.data.input._id,n)}))})),this.json.nodes.forEach((function(e){var t=e.data.title,r=new Map,o=e.data.inputs,a=e.data.outputs;o.forEach((function(e,n){var t=!1,o={stream:function(n){f(e._id,n)},get ready(){return new Promise((function(e){var n=setInterval((function(){t&&(clearInterval(n),e(t))}),0)}))}};f(e._id,(function(e){t=e})),r.set("in"+n,o)})),a.forEach((function(e,n){r.set("out"+n,{pulse:function(n){m(e._id,n)}})}));var s=new Proxy({},{get:function(e,n){return(0!==n.indexOf("in")||isNaN(n[2]))&&(0!==n.indexOf("out")||isNaN(n[3]))?void 0:r.get(n)}}),d=i.find((function(e){return e[u]===t}));d&&d[c]().then((function(e){try{return Promise.resolve(e.effect({mini:n.mini,node:s}))}catch(t){return Promise.reject(t)}})).catch((function(e){console.log(e)}))})),this.mini.set("all-ready",!0)},h=function(e,n){var t=!1;try{t=new window.XMLHttpRequest}catch(r){}return t&&"withCredentials"in t?t.open(e,n,!0):"undefined"!==typeof XDomainRequest?((t=new window.XDomainRequest).open(e,n),t.onload=function(){t.readyState=4,t.onreadystatechange instanceof Function&&t.onreadystatechange()}):t&&t.open(e,n,!0),t};var p=function(e){var n=!1;for(var t in e)n||(n=e[t]);if(n){var r=[];for(var o in n.connections)r.push({_fid:o,data:n.connections[o]});var i=[];for(var a in n.nodes)i.push({_fid:a,data:n.nodes[a]});return{connections:r,nodes:i}}return!1},v=t(21);function w(){return o.a.createElement("div",{style:{width:"100%",height:"100%"}},o.a.createElement(v.a,{style:{width:"100%",height:"100%"}},o.a.createElement(y,null)))}function y(){var e=Object(r.useRef)(),n=Object(r.useRef)(),t=Object(r.useState)((function(){return o.a.createElement("group",null)})),i=Object(c.a)(t,2),a=i[0],u=i[1];return Object(r.useEffect)((function(){return n.current=new m({json:p({NGpUixuU0NOkOlmLsLuepkaZxxt1:{connections:{"-MdPINDxi9T3AotCKSfB":{_id:"_via641l4y3wgloaeb7",input:{_id:"_od5ohzl5avwo3ltnf8",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},output:{_id:"_iys0bi1wbszoajdrbq",nodeID:"_sbhxwatnnvkk95yslm",type:"output"}}},nodes:{"-MdFPnHiFrg5AXKZPPLV":{_id:"_lka05oa2emaxqkxd7w",inputs:[{_id:"_od5ohzl5avwo3ltnf8",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},{_id:"_fbb9aoyc66f0f057p4",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},{_id:"_kbb8xyxn4zegnkmww4",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},{_id:"_j27f14qjt3crj7jrkm",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},{_id:"_5awgse7wgryzl4unfr",nodeID:"_lka05oa2emaxqkxd7w",type:"input"}],outputs:[{_id:"_wcz630splzoznvol9b",nodeID:"_lka05oa2emaxqkxd7w",type:"output"},{_id:"_yn1yu9pye1gep7hui2",nodeID:"_lka05oa2emaxqkxd7w",type:"output"},{_id:"_aydf7dn80m375qhcus",nodeID:"_lka05oa2emaxqkxd7w",type:"output"},{_id:"_p9k078jvmtv2muzw8t",nodeID:"_lka05oa2emaxqkxd7w",type:"output"},{_id:"_g4d8r8w1y5ybgdutey",nodeID:"_lka05oa2emaxqkxd7w",type:"output"}],position:[13.81351241290946,-6268112984381583e-30,28.229071300777065],title:"lok.mySecondNode.js"},"-MdMk9rFgJSESwDybIfB":{_id:"_sbhxwatnnvkk95yslm",inputs:[{_id:"_dzsph16c3ubtltaukb",nodeID:"_sbhxwatnnvkk95yslm",type:"input"},{_id:"_8oxaioc4n4xche1mmi",nodeID:"_sbhxwatnnvkk95yslm",type:"input"},{_id:"_h67wqxjauc8uit6qzf",nodeID:"_sbhxwatnnvkk95yslm",type:"input"},{_id:"_txfnifvgobsqp7wkno",nodeID:"_sbhxwatnnvkk95yslm",type:"input"},{_id:"_hh7yqw6u0kaa2f4vsr",nodeID:"_sbhxwatnnvkk95yslm",type:"input"}],outputs:[{_id:"_iys0bi1wbszoajdrbq",nodeID:"_sbhxwatnnvkk95yslm",type:"output"},{_id:"_s06csj99keboy364wd",nodeID:"_sbhxwatnnvkk95yslm",type:"output"},{_id:"_r94f0g30633kompktd",nodeID:"_sbhxwatnnvkk95yslm",type:"output"},{_id:"_lm15qdzn3k08zt783f",nodeID:"_sbhxwatnnvkk95yslm",type:"output"},{_id:"_izp3hqkt018y23lwk0",nodeID:"_sbhxwatnnvkk95yslm",type:"output"}],position:[23.8559458588784,1363425432176458e-30,-6.1403222682973535],title:"lok.myFristNode.js"}}}}),codes:k()}),n.current.mini.get("DefaultComponent").then((function(e){u(e)})),function(){n.current&&(n.current.mini.clean(),n.current.clean())}}),[]),Object(v.b)((function(t){var r=(0,t.get)();if(n.current){for(var o in r)n.current.mini.set(o,r[o]);e.current&&n.current.mini.set("mounter",e.current),n.current.mini.work()}})),o.a.createElement(o.a.Fragment,null,o.a.createElement("group",{ref:e},a))}var k=function(){var e=t(37);return function(n){var t=[];return n.keys().forEach((function(r){var o=e.basename(r);t.push({title:o,loader:function(){return n(r)}})})),t}(t(55))};function _(){return o.a.createElement("div",{style:{width:"100%",height:"100%"}},o.a.createElement(v.a,{style:{width:"100%",height:"100%"}},o.a.createElement(b,null)))}function b(){var e=Object(r.useRef)(),n=Object(r.useRef)(),t=Object(r.useState)((function(){return o.a.createElement("group",null)})),i=Object(c.a)(t,2),a=i[0],u=i[1];return Object(r.useEffect)((function(){return f({firebaseConfig:E,graphID:"-MdBQtfGPXXPkl-NuEoW"}).then((function(e){n.current=new m({json:e,codes:g()}),n.current.mini.get("DefaultComponent").then((function(e){u(e)}))})),function(){n.current&&(n.current.mini.clean(),n.current.clean())}}),[]),Object(v.b)((function(t){var r=(0,t.get)();if(n.current){for(var o in r)n.current.mini.set(o,r[o]);e.current&&n.current.mini.set("mounter",e.current),n.current.mini.work()}})),o.a.createElement(o.a.Fragment,null,o.a.createElement("group",{ref:e},a))}var g=function(){var e=t(37);return function(n){var t=[];return n.keys().forEach((function(r){var o=e.basename(r);t.push({title:o,loader:function(){return n(r)}})})),t}(t(56))},E={databaseURL:"https://en-you.firebaseio.com/"};function x(){return o.a.createElement("div",null,"Demos of EffectNode Runtime",o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(u.b,{to:"/StaticDemo"},"StaticDemo")),o.a.createElement("li",null,o.a.createElement(u.b,{to:"/FirebaseDemo"},"FirebaseDemo"))))}var D=function(){return o.a.createElement(u.a,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/StaticDemo"},o.a.createElement(w,null)),o.a.createElement(s.a,{path:"/FirebaseDemo"},o.a.createElement(_,null)),o.a.createElement(s.a,{path:"/"},o.a.createElement(x,null))))};a.a.render(o.a.createElement(D,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.84502f72.chunk.js.map