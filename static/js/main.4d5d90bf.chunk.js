(this["webpackJsonpeffectnode-example"]=this["webpackJsonpeffectnode-example"]||[]).push([[0],{43:function(e,t,n){e.exports=n(62)},44:function(e,t,n){},55:function(e,t,n){var r={"./lok.myFristNode.js":[63,5],"./lok.mySecondNode.js":[64,6]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=55,e.exports=o},56:function(e,t,n){var r={"./lok.myFristNode.js":[65,3],"./lok.mySecondNode.js":[66,4]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=56,e.exports=o},62:function(e,t,n){"use strict";n.r(t);n(44);var r=n(4),o=n.n(r),a=n(39),i=n.n(a),u=n(26),c=n(10),s=n(8),l=n(12),d=n.n(l),f=n(17),p=n(0),m=n(1),h=function(){function e(){Object(p.a)(this,e),this.listeners=new Map}return Object(m.a)(e,[{key:"addEventListener",value:function(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}},{key:"removeEventListener",value:function(e,t){var n=this.listeners.get(e),r=0;return!!(n&&n.length&&(r=n.reduce((function(e,n,r){return"function"===typeof n&&n===t?e=r:e}),-1))>-1)&&(n.splice(r,1),this.listeners.set(e,n),!0)}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.listeners.get(e);return!(!o||!o.length)&&(o.forEach((function(e){e.apply(void 0,n)})),!0)}}]),e}(),v=function e(t){var n=this,r=t.parent,o=void 0!==r&&r;Object(p.a)(this,e),this.name="ENMini",this.parent=o,this.resource=new Map,this.get=function(e){return new Promise((function(t){var r=0;r=setInterval((function(){n.parent?(n.resource.has(e)||n.parent.resource.has(e))&&(clearInterval(r),t(n.resource.get(e)||n.parent.resource.get(e))):n.resource.has(e)&&(clearInterval(r),t(n.resource.get(e)))}))}))};var a="_"+Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9);this.set=function(e,t){n.resource.set(e,t),window.dispatchEvent(new window.CustomEvent("".concat(a).concat(e),{detail:t}))},this.onChange=function(e,t){var r=function(e){var n=e.detail;t(n)};n.get(e).then(t),window.addEventListener("".concat(a).concat(e),r),n.onClean((function(){window.removeEventListener("".concat(a).concat(e),r)}))};var i=!1;this.tasks=[],this.resizeTasks=[],this.cleanTasks=[],this.onLoop=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>=0?n.tasks.push(e):n.tasks.unshift(e)},this.onResize=function(e){e(),n.resizeTasks.push(e)},this.onClean=function(e){n.cleanTasks.push(e)};var u=0;window.addEventListener("resize",(function(){clearTimeout(u),u=setTimeout((function(){n.resizeTasks.forEach((function(e){return e()}))}),16.8888)}));var c=!1;this.toggle=function(){c=!c},this.pause=function(){c=!0},this.play=function(){c=!1},this.clean=function(){i=!0;try{n.cleanTasks.forEach((function(e){return e()}))}catch(e){console.error(e)}},this.lastTime=window.performance.now(),this.work=function(){if(n.timeNow=window.performance.now(),i)return{name:n.name,duration:0};if(c)return{name:n.name,duration:0};var e=window.performance.now();try{var t=n.timeNow,r=n.lastTime,o=t-r;n.lastTime=t,t/=1e3,(o/=1e3)>=100&&(o=100),n.tasks.forEach((function(e){return e(t,o)}))}catch(u){console.error(u)}var a=window.performance.now()-e;return{name:n.name,duration:a}},this.ready=new Proxy({},{get:function(e,t){return n.get(t)}}),this.now=new Proxy({},{get:function(e,t){return n.parent?n.resource.get(t)||n.parent.resource.get(t):n.resource.get(t)}})},w=function e(t){var n=this,r=t.json,o=void 0!==r&&r,a=t.codes,i=void 0===a?[]:a,u=t.codeIDKey,c=void 0===u?"title":u,s=t.codeLoaderKey,l=void 0===s?"loader":s;Object(p.a)(this,e);var m=this;if(this.events=new h,!i)throw new Error("needs code batteries");if(!o)throw new Error("needs code batteries");this.json=o,this.codes=i,this.mini=new v({}),this.clean=function(){n.mini.clean()};var w=function(e,t){n.events.addEventListener(e,t),n.mini.onClean((function(){n.events.removeEventListener(e,t)}))},k=function(e,t){n.events.trigger(e,t)};this.json.connections.forEach((function(e){w(e.data.output._id,(function(t){k(e.data.input._id,t)}))})),this.json.nodes.forEach((function(e){var t=e.data.title,n=new Map,r=e.data.inputs,o=e.data.outputs;r.forEach((function(e,t){var r=!1,o={stream:function(t){w(e._id,t)},get ready(){return new Promise((function(e){var t=setInterval((function(){r&&(clearInterval(t),e(r))}),0)}))}};w(e._id,(function(e){r=e})),n.set("in".concat(t),o)})),o.forEach((function(e,t){n.set("out".concat(t),{pulse:function(t){k(e._id,t)}})}));var a=new Proxy({},{get:function(e,t){return(0!==t.indexOf("in")||isNaN(t[2]))&&(0!==t.indexOf("out")||isNaN(t[3]))?void 0:n.get(t)}}),u=i.find((function(e){return e[c]===t}));u&&u[l]().then(function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.effect({mini:m.mini,node:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))})),this.mini.set("all-ready",!0)},k=function e(t,n){Object(p.a)(this,e);var r=!1;try{r=new window.XMLHttpRequest}catch(o){}return r&&"withCredentials"in r?r.open(t,n,!0):"undefined"!==typeof XDomainRequest?((r=new window.XDomainRequest).open(t,n),r.onload=function(){r.readyState=4,r.onreadystatechange instanceof Function&&r.onreadystatechange()}):r&&r.open(t,n,!0),r};function y(e){var t=e.url;return new Promise((function(e,n){var r=new k("GET",t);r.onreadystatechange=function(){if(4===r.readyState)try{var t=JSON.parse(r.responseText);e(t)}catch(o){n(o)}},r.send()}))}function b(e){return e.replace(/\/+$/,"")}function _(){return(_=Object(f.a)(d.a.mark((function e(t){var n,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.firebaseConfig,r=t.graphID,o="".concat(b(n.databaseURL),"/canvas/").concat(r,".json"),e.abrupt("return",y({url:o}).then(g,(function(){return!1})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){var t=!1;for(var n in e)t||(t=e[n]);if(t){var r=[];for(var o in t.connections)r.push({_fid:o,data:t.connections[o]});var a=[];for(var i in t.nodes)a.push({_fid:i,data:t.nodes[i]});return{connections:r,nodes:a}}return!1},x=n(22);function E(e){var t=e.url;return o.a.createElement("a",{href:t,target:"_blank",rel:"noreferrer noopener"},o.a.createElement("button",{style:{position:"absolute",bottom:"50px",right:"50px",padding:"10px 20px",appearance:"none",backgroundColor:"greenyellow",border:"none",borderRadius:"15px",color:"darkgreen",cursor:"pointer"}},"View Code"))}function D(){return o.a.createElement("div",{style:{width:"100%",height:"100%"}},o.a.createElement(x.a,{style:{width:"100%",height:"100%"}},o.a.createElement(j,null)),o.a.createElement(E,{url:"https://github.com/wonglok/effectnode/blob/master/example/src/pages/StaticDemo/StaticDemo.js"}))}function j(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useState)((function(){return o.a.createElement("group",null)})),a=Object(s.a)(n,2),i=a[0],u=a[1];return Object(r.useEffect)((function(){return t.current=new w({json:g({NGpUixuU0NOkOlmLsLuepkaZxxt1:{connections:{"-MdPINDxi9T3AotCKSfB":{_id:"_via641l4y3wgloaeb7",input:{_id:"_od5ohzl5avwo3ltnf8",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},output:{_id:"_iys0bi1wbszoajdrbq",nodeID:"_sbhxwatnnvkk95yslm",type:"output"}}},nodes:{"-MdFPnHiFrg5AXKZPPLV":{_id:"_lka05oa2emaxqkxd7w",inputs:[{_id:"_od5ohzl5avwo3ltnf8",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},{_id:"_fbb9aoyc66f0f057p4",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},{_id:"_kbb8xyxn4zegnkmww4",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},{_id:"_j27f14qjt3crj7jrkm",nodeID:"_lka05oa2emaxqkxd7w",type:"input"},{_id:"_5awgse7wgryzl4unfr",nodeID:"_lka05oa2emaxqkxd7w",type:"input"}],outputs:[{_id:"_wcz630splzoznvol9b",nodeID:"_lka05oa2emaxqkxd7w",type:"output"},{_id:"_yn1yu9pye1gep7hui2",nodeID:"_lka05oa2emaxqkxd7w",type:"output"},{_id:"_aydf7dn80m375qhcus",nodeID:"_lka05oa2emaxqkxd7w",type:"output"},{_id:"_p9k078jvmtv2muzw8t",nodeID:"_lka05oa2emaxqkxd7w",type:"output"},{_id:"_g4d8r8w1y5ybgdutey",nodeID:"_lka05oa2emaxqkxd7w",type:"output"}],position:[13.81351241290946,-6268112984381583e-30,28.229071300777065],title:"lok.mySecondNode.js"},"-MdMk9rFgJSESwDybIfB":{_id:"_sbhxwatnnvkk95yslm",inputs:[{_id:"_dzsph16c3ubtltaukb",nodeID:"_sbhxwatnnvkk95yslm",type:"input"},{_id:"_8oxaioc4n4xche1mmi",nodeID:"_sbhxwatnnvkk95yslm",type:"input"},{_id:"_h67wqxjauc8uit6qzf",nodeID:"_sbhxwatnnvkk95yslm",type:"input"},{_id:"_txfnifvgobsqp7wkno",nodeID:"_sbhxwatnnvkk95yslm",type:"input"},{_id:"_hh7yqw6u0kaa2f4vsr",nodeID:"_sbhxwatnnvkk95yslm",type:"input"}],outputs:[{_id:"_iys0bi1wbszoajdrbq",nodeID:"_sbhxwatnnvkk95yslm",type:"output"},{_id:"_s06csj99keboy364wd",nodeID:"_sbhxwatnnvkk95yslm",type:"output"},{_id:"_r94f0g30633kompktd",nodeID:"_sbhxwatnnvkk95yslm",type:"output"},{_id:"_lm15qdzn3k08zt783f",nodeID:"_sbhxwatnnvkk95yslm",type:"output"},{_id:"_izp3hqkt018y23lwk0",nodeID:"_sbhxwatnnvkk95yslm",type:"output"}],position:[23.8559458588784,1363425432176458e-30,-6.1403222682973535],title:"lok.myFristNode.js"}}}}),codes:I()}),t.current.mini.get("DefaultComponent").then((function(e){u(e)})),function(){t.current&&(t.current.mini.clean(),t.current.clean())}}),[]),Object(x.b)((function(n){var r=(0,n.get)();if(t.current){for(var o in r)t.current.mini.set(o,r[o]);e.current&&t.current.mini.set("mounter",e.current),t.current.mini.work()}})),o.a.createElement(o.a.Fragment,null,o.a.createElement("group",{ref:e},i))}var I=function(){var e=n(37);return function(t){var n=[];return t.keys().forEach((function(r){var o=e.basename(r);n.push({title:o,loader:function(){return t(r)}})})),n}(n(55))};function O(){return o.a.createElement("div",{style:{width:"100%",height:"100%"}},o.a.createElement(x.a,{style:{width:"100%",height:"100%"}},o.a.createElement(q,null)),o.a.createElement(E,{url:"https://github.com/wonglok/effectnode/blob/master/example/src/pages/FirebaseDemo/FirebaseDemo.js"}))}function q(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useState)((function(){return o.a.createElement("group",null)})),a=Object(s.a)(n,2),i=a[0],u=a[1];return Object(r.useEffect)((function(){return function(e){return _.apply(this,arguments)}({firebaseConfig:z,graphID:"-MdBQtfGPXXPkl-NuEoW"}).then((function(e){t.current=new w({json:e,codes:N()}),t.current.mini.get("DefaultComponent").then((function(e){u(e)}))})),function(){t.current&&(t.current.mini.clean(),t.current.clean())}}),[]),Object(x.b)((function(n){var r=(0,n.get)();if(t.current){for(var o in r)t.current.mini.set(o,r[o]);e.current&&t.current.mini.set("mounter",e.current),t.current.mini.work()}})),o.a.createElement(o.a.Fragment,null,o.a.createElement("group",{ref:e},i))}var N=function(){var e=n(37);return function(t){var n=[];return t.keys().forEach((function(r){var o=e.basename(r);n.push({title:o,loader:function(){return t(r)}})})),n}(n(56))},z={databaseURL:"https://en-you.firebaseio.com/"};function S(){return o.a.createElement("div",null,"Demos of EffectNode Runtime:",o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(u.b,{to:"/StaticDemo"},"StaticDemo")),o.a.createElement("li",null,o.a.createElement(u.b,{to:"/FirebaseDemo"},"FirebaseDemo"))))}var L=function(){return o.a.createElement(u.a,null,o.a.createElement(c.c,null,o.a.createElement(c.a,{path:"/StaticDemo"},o.a.createElement(D,null)),o.a.createElement(c.a,{path:"/FirebaseDemo"},o.a.createElement(O,null)),o.a.createElement(c.a,{path:"/"},o.a.createElement(S,null))))};i.a.render(o.a.createElement(L,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.4d5d90bf.chunk.js.map